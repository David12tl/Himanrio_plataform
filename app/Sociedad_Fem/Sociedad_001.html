<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="icon" href="../../images/libro.png" />
  <title>Himnario Presbiteriano</title>
  <link rel="stylesheet" href="../../estilos.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100..900&display=swap" rel="stylesheet" />
</head>
<body>
  <div class="main">
    <div class="sidebar">
      <div class="nav">
        <div class="nav-option" style="opacity: 1;">
          <i class="fa-solid fa-house"></i>
          <a href="../../index.html">Home</a>
        </div>
        <div class="nav-option">
          <i class="fa-solid fa-magnifying-glass"></i>
          <a href="#">Search</a>
        </div>
      </div>
      <div class="library">
        <br>
        <div class="options">
          <div class="lib-option nav-option">
            <a href="static/introduccion.html">Información General</a>
          </div>
          <div class="icons">
            <a href="001-060.html"><i class="fa-solid fa-arrow-right"></i></a>
          </div>
        </div>
        <button class="menu-toggle">☰ Información General</button>
        <div class="lib-menu">
          <div class="lib-box">
            <div class="box"><h3>RESEÑA</h3><p>Conviene considerar el origen y desarrollo de nuestra iglesia...</p>
              <button class="badge" onclick="location.href='/static/reseña.html'">Contenido</button></div>
            <div class="box"><h3>Advertencia</h3><p>Todos los himnos que integran este himnario Sólo a Dios la...</p>
              <button class="badge" onclick="location.href='/static/advertencia.html'">Contenido</button></div>
            <div class="box"><h3>Indice</h3><p>¿Cuál es el fin principal del nombre? El fin principal del...</p>
              <button class="badge" onclick="location.href='/static/indice.html'">Contenido</button></div>
            <div class="box"><h3>PRESENTACIÓN</h3><p>La Iglesia Nacional Presbiteriana de México, como parte...</p>
              <button class="badge" onclick="location.href='/static/presentacion.html'">Contenido</button></div>
            <div class="box"><h3>INTRODUCCIÓN</h3><p>El canto es tan antiguo como la creación...</p>
              <button class="badge" onclick="location.href='/static/introduccion.html'">Contenido</button></div>
            <div class="box"><h3>RECONOCIMIENTO</h3><p>La honra y la gloria es para Dios, pero el ...</p>
              <button class="badge" onclick="location.href='/static/reconocimiento.html'">Contenido</button></div>
            <div class="box"><h3>AYUDAS LITÚRGICAS</h3><p>Creo en Dios padre Todopoderoso, Creador del...</p>
              <button class="badge" onclick="location.href='/static/ayudas.html'">Contenido</button></div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-content">
      <div class="sticky-nav">
        <div class="nav-icons">
          <a href="../../index.html"><img src="../../images/backward_icon.png" class="hide" alt="Back" /></a>
          <a id="nextHimno"><img src="../../images/forward_icon.png" class="hide" alt="Forward" /></a>
        </div>
      </div>

      <div class="himno" style="color:white; padding:2rem; text-align:center; font-size: 1.2rem;">
        <h1>Himno de la Sociedad Femenil</h1>
        <h2 id="titulo-himno">Cargando...</h2>
        <p id="letra-himno">...</p>
      </div>
    </div>

    <div class="music-player">
      <div class="album"></div>
      <div class="player">
        <div class="player-controls">
          <img src="../../images/player_icon5.png" class="player-control-icon" alt="Play Icon" />
          <img src="../../images/player_icon2.png" class="player-control-icon" alt="Prev Icon" />
          <img src="../../images/player_icon3.png" class="player-control-icon" style="opacity: 1;height: 2rem;" alt="Pause Icon" />
          <img src="../../images/player_icon4.png" class="player-control-icon" alt="Shuffle Icon" />
          <img src="../../images/player_icon1.png" class="player-control-icon" alt="Loop Icon" />
          <div class="audio-info">
            <span id="songName" style="font-size: 1rem; color: #fff; margin-bottom: 0.2rem;">Reproduciendo: Sociedad_Femenil.mp3</span>
            <div style="display: flex; align-items: center; justify-content: center; width: 90%;">
              <span id="currentTime" style="font-size: 0.9rem; color: #ccc; min-width: 40px;">00:00</span>
              <input type="range" id="progressBar" value="0" min="0" max="100" step="1" style="flex:1; margin: 0 0.5rem;">
              <span id="duration" style="font-size: 0.9rem; color: #ccc; min-width: 40px;">00:00</span>
            </div>
          </div>
        </div>
        <div style="text-align:center; margin: 0.5rem 0;">
          <audio id="audioPlayer" controls style="width:90%; background:#232323; border-radius:1rem; display:none;">
            <source id="audioSource" src="../../himnos/Sociedad_Femenil.mp3" type="audio/mp3">
            Tu navegador no soporta el elemento de audio.
          </audio>
        </div>
      </div>
    </div>
  </div>

<script>
  // --- Leer ?ver= de la URL ---
  const params = new URLSearchParams(window.location.search);
  let ver = parseInt(params.get('ver')) || 1;
  ver = Math.min(Math.max(ver, 1), 706);

  document.getElementById("nextHimno").href = `?ver=${Math.min(ver + 1, 706)}`;

  // --- Cargar letra.json ---
  fetch('letra.json')
    .then(res => res.json())
    .then(himnos => {
      if (himnos[ver]) {
        document.getElementById('titulo-himno').textContent = himnos[ver].titulo || "Sin título";
        document.getElementById('letra-himno').innerHTML = (himnos[ver].letra || "").replace(/\n/g, "<br>");
      } else {
        document.getElementById('titulo-himno').textContent = "Himno no disponible.";
        document.getElementById('letra-himno').textContent = "";
      }
    })
    .catch(err => console.error("Error al cargar letra.json:", err));
</script>

<!-- Tu script de audio -->
<script src="../../components/audio-player.js"></script>
</body>
</html>
